{% extends "base_site.html" %}

{% block title %} Stats {% endblock title %}

{% block stylesheets %}
  {{ super() }}
{% endblock stylesheets %}

{% block content %}


<!-- Page Description and Instructions -->
<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-body">      
        <div id="accordion" role="tablist" aria-multiselectable="true" class="card-collapse">
          <h4 class="card-title">Stats and Charts</h4>
          <div class="card card-plain">
            <div class="card-header" role="tab" id="headingOne">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapse_1" aria-expanded="true" aria-controls="collapseOne">
                How to use this page
                <i class="nc-icon nc-minimal-down"></i>
              </a>
            </div>
            <div id="collapse_1" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
              <div class="card-body">

                <br><br>
                <div class="form-group row left align">
                  <label class="control-label col-md-3 col-sm-3 ">Select a year</label>
                  <div class="col-md-4 col-sm-4">
                    <select value="" id='stats_page_year_dropdown' class="form-control">
                      
                      {% for year in years %}
                        
                          <option> {{ year }} </option>
                      
                      {% endfor %}
                    
                    </select>
                  </div>
                </div>  
                

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- /Page Description and Instructions -->
  
            
<!-- All Asset Stats Table -->
<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-body">
        <div id="accordion" role="tablist" aria-multiselectable="true" class="card-collapse">
          <h4 class="card-title">Select an asset</h4>
          <input id="statspage_hide_unsold" type="checkbox" class="flat"> Hide assets not sold (WIP)
          <div class="card card-plain">
            <div class="card-header" role="tab" id="headingOne">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapse_2" aria-expanded="true" aria-controls="collapseOne">
                <i class="nc-icon nc-minimal-down"></i>
              </a>
            </div>
            <div id="collapse_2" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
              
              <!-- Card Body -->
              <div class="card-body ">
                <table id="statspage_stats_datatable" class="table table-striped table-bordered" style="width:100%">
                  <thead>
                      <tr>
                        <th>Asset</th>
                        <th>Quantity Purchased</th>
                        <th>Quantity Sold</th>
                        <th>Quantity Sold Unlinked</th>
                        <th>Quantity Purchased Unlinked</th>
                        <th>Purchased in USD</th>
                        <th>Sold in USD</th>
                        <th>Realized Profit</th>
                        <th>HODL</th>
                      </tr>
                    </thead>

                  <tbody>
                    {% for row in stats_table_data %}
                    <tr>
                      <td>{{ row['symbol'] }}</td>
                      <td>{{ row['total_purchased_quantity'] }}</td>
                      <td>{{ row['total_sold_quantity'] }}</td>
                      <td>{{ row['total_sold_unlinked_quantity'] }}</td>
                      <td>{{ row['total_purchased_unlinked_quantity'] }}</td>
                      <td>{{ row['total_purchased_usd'] }}</td>
                      <td>{{ row['total_sold_usd']  }}</td>
                      <td>{{ row['total_profit_loss']  }}</td>
                      <td>{{ row['hodl'] }}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
              <!-- /Card Body -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- All Asset Stats Table End -->

<!-- Detailed Stats  -->
<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-body">
        <div id="accordion" role="tablist" aria-multiselectable="true" class="card-collapse">
          <h4 class="card-title">Detailed Stats</h4>
          <div class="card card-plain">
            <div class="card-header" role="tab" id="headingOne">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapse_3" aria-expanded="true" aria-controls="collapseOne">
                <i class="nc-icon nc-minimal-down"></i>
              </a>
            </div>
            <div id="collapse_3" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
              
              <!-- Card Body -->
              <div class="card-body ">                         
                <table id="statspage_detailed_datatable" class="table table-striped table-bordered" style="width:100%">
                  <thead>
                      <tr>
                        <th>Description</th>
                        <th>Value</th>
                      </tr>
                    </thead>
                </table>
              </div>
              <!-- /Card Body -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--Detailed Stats End -->

<!-- Sales Table -->
<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-body">
        <div id="accordion" role="tablist" aria-multiselectable="true" class="card-collapse">
          <h4 class="card-title">Sales</h4>
          <div class="card card-plain">
            <div class="card-header" role="tab" id="headingOne">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapse_2" aria-expanded="true" aria-controls="collapseOne">
                <i class="nc-icon nc-minimal-down"></i>
              </a>
            </div>
            <div id="collapse_2" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
              
              <!-- Card Body -->
              <div class="card-body ">
                <table id="statspage_sells_datatable" class="table table-striped table-bordered" style="width:100%">
                  <thead>

                      <tr>
                        <th>Description</th>
                        <th>Date Acquired</th>
                        <th>Date sold or disposed of</th>
                        <th>Proceeds. Sale - Fees</th>
                        <th>Cost or other basis. Buy(s) + Fees</th>
                        <th>Gain/Loss</th>
                        <th>Source</th>
                      </tr>
                    </thead>
            
                </table>
              </div>
              <!-- /Card Body -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Sales Table -->


<!-- 8949 Long Table -->
<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-body">
        <div id="accordion" role="tablist" aria-multiselectable="true" class="card-collapse">
          <h4 class="card-title">8949 Long</h4>
          <div class="card card-plain">
            <div class="card-header" role="tab" id="headingOne">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapse_2" aria-expanded="true" aria-controls="collapseOne">
                <i class="nc-icon nc-minimal-down"></i>
              </a>
            </div>
            <div id="collapse_2" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
              
              <!-- Card Body -->
              <div class="card-body ">
                <table id="s8949_table" class="table table-striped table-bordered" style="width:100%">
                  <thead>
                      <tr>
                        <th>Description</th>
                        <th>Date Acquired</th>
                        <th>Date sold or disposed of</th>
                        <th>Proceeds. Sale - Fees</th>
                        <th>Cost or other basis. Buy(s) + Fees</th>
                        <th>Gain/Loss</th>
                        <th>Source</th>
                      </tr>
                    </thead>
            
                </table>
              </div>
              <!-- /Card Body -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- 8949 Long Table -->


<!-- 8949 Short Table -->
<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-body">
        <div id="accordion" role="tablist" aria-multiselectable="true" class="card-collapse">
          <h4 class="card-title">8949 Short</h4>
          <div class="card card-plain">
            <div class="card-header" role="tab" id="headingOne">
              <a data-toggle="collapse" data-parent="#accordion" href="#collapse_2" aria-expanded="true" aria-controls="collapseOne">
                <i class="nc-icon nc-minimal-down"></i>
              </a>
            </div>
            <div id="collapse_2" class="collapse show" role="tabpanel" aria-labelledby="headingOne">
              
              <!-- Card Body -->
              <div class="card-body ">
                <table id="l8949_table" class="table table-striped table-bordered" style="width:100%">
                  <thead>
                      <tr>
                        <th>Description</th>
                        <th>Date Acquired</th>
                        <th>Date sold or disposed of</th>
                        <th>Proceeds. Sale - Fees</th>
                        <th>Cost or other basis. Buy(s) + Fees</th>
                        <th>Gain/Loss</th>
                        <th>Source</th>
                      </tr>
                    </thead>
            
                </table>
              </div>
              <!-- /Card Body -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- 8949 Short Table -->



<!-- Gainz Chart  -->
<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-body">
          <div class="card card-plain">
            <div class="card-header">
              <h5 class="card-title">Gainz Chart</h5>
              <p class="card-category">Unrealized Gains or Losses</p>
              <div class="col-sm-2">
                <label class="col-form-label">USD Spot:</label>
                <div class="form-group">
                  
                  <input id='stats_usd_spot' class="form-control" type="text" name="number" number="true" />
                
                </div>
              </div>
            </div>
            <div class="card-body">
              <canvas id="gainzChart"></canvas>
            </div>
          </div>
      </div>
    </div>
  </div>
</div>
<!-- /Gainz Chart  -->




{% endblock content %}

{% block javascripts %}
  {{ super()}}
{% endblock javascripts %}



